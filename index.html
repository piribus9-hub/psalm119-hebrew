<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- PWA ì„¤ì¹˜ë¥¼ ìœ„í•œ ë©”íƒ€ íƒœê·¸ -->
    <meta name="theme-color" content="#4F46E5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì‹œí¸119">
    <meta name="description" content="ì‹œí¸ 119í¸ íˆë¸Œë¦¬ì–´ ë‹¨ì–´ë³„ í•™ìŠµ ì•±">
    <title>ì‹œí¸ 119í¸ íˆë¸Œë¦¬ì–´ í•™ìŠµ</title>

    <!-- PWA Manifestì™€ Icon Data URLì„ ì¸ë¼ì¸ìœ¼ë¡œ ì •ì˜ -->
    <link rel="manifest" id="manifest-pwa">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='75' font-size='80'%3EğŸ“–%3C/text%3E%3C/svg%3E">
    
    <!-- Tailwind CSS ë° React ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest"></script>

    <style>
        body {
            overscroll-behavior: none;
            -webkit-overflow-scrolling: touch;
            font-family: 'Inter', sans-serif;
        }
        * {
            -webkit-tap-highlight-color: transparent;
        }
        /* íˆë¸Œë¦¬ì–´ í°íŠ¸ ìŠ¤íƒ€ì¼ */
        .hebrew-text {
            font-family: 'David', 'Ezra SIL', 'Times New Roman', serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // React Componentì™€ Logic (Psalm119HebrewLearner.jsxì˜ ë‚´ìš©)

        const { useState, useMemo, useEffect } = React;
        // [ìˆ˜ì •ëœ ë¶€ë¶„]: UMD ë²ˆë“¤ì—ì„œ 'lucide' ëŒ€ì‹  'LucideReact' ê¸€ë¡œë²Œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìœ¼ë¯€ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
        // ì´ëŠ” 'ReferenceError'ì™€ 'forwardRef' ê´€ë ¨ TypeErrorë¥¼ í•´ê²°í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
        const { ChevronLeft, ChevronRight, BookOpen, X, Home } = LucideReact; 

        // --- ë°ì´í„° ì •ì˜ (ì‹œí¸ 119í¸ì˜ ì¼ë¶€ ì ˆë§Œ í¬í•¨) ---
        const PSALM_119_DATA = [
          // Stanza 1: Aleph (×) - Verses 1-8
          {
            hebrewLetter: "× (Aleph)",
            startVerse: 1,
            endVerse: 8,
            verses: [
              {
                verse: 1,
                hebrew: "×Ö·×©×Ö°×¨Öµ×™ ×ªÖ°×Ö´×™×Öµ×™Ö¾×“Ö¸×¨Ö¶×šÖ° ×”Ö·×”Ö¹×œÖ°×›Ö´×™× ×‘Ö¼Ö°×ª×•Ö¹×¨Ö·×ª ×™Ö°×”×•Ö¸×”×ƒ",
                translation: "í–‰ìœ„ê°€ ì˜¨ì „í•˜ì—¬ ì—¬í˜¸ì™€ì˜ ìœ¨ë²•ì„ ë”°ë¼ í–‰í•˜ëŠ” ìë“¤ì€ ë³µì´ ìˆìŒì´ì—¬.",
                words: [
                  { h: "×Ö·×©×Ö°×¨Öµ×™", t: "Ashrei", m: "ë³µì´ ìˆëŠ”", r: "Interjection" },
                  { h: "×ªÖ°×Ö´×™×Öµ×™Ö¾×“Ö¸×¨Ö¶×šÖ°", t: "temimei-darekh", m: "ê¸¸ì´ ì˜¨ì „í•œ ìë“¤", r: "Noun phrase" },
                  { h: "×”Ö·×”Ö¹×œÖ°×›Ö´×™×", t: "hahol'khim", m: "ê±·ëŠ” ìë“¤", r: "Verb (Piel Participle)" },
                  { h: "×‘Ö¼Ö°×ª×•Ö¹×¨Ö·×ª", t: "b'torat", m: "ìœ¨ë²• ì•ˆì—", r: "Noun (Torah)" },
                  { h: "×™Ö°×”×•Ö¸×”", t: "YHWH", m: "ì—¬í˜¸ì™€", r: "Proper Noun" }
                ]
              },
              {
                verse: 2,
                hebrew: "×Ö·×©×Ö°×¨Öµ×™ ×©×Ö¹×Ö°×¨Öµ×™ ×¢Öµ×“Ö¹×ªÖ¸×™×• ×‘Ö¼Ö°×›Ö¸×œÖ¾×œÖµ×‘ ×™Ö´×“Ö°×¨Ö°×©××•Ö¼×”×•Ö¼×ƒ",
                translation: "ì—¬í˜¸ì™€ì˜ ì¦ê±°ë“¤ì„ ì§€í‚¤ê³  ì „ì‹¬ìœ¼ë¡œ ì—¬í˜¸ì™€ë¥¼ êµ¬í•˜ëŠ” ìë“¤ì€ ë³µì´ ìˆë„ë‹¤.",
                words: [
                  { h: "×Ö·×©×Ö°×¨Öµ×™", t: "Ashrei", m: "ë³µì´ ìˆëŠ”", r: "Interjection" },
                  { h: "×©×Ö¹×Ö°×¨Öµ×™", t: "shom'rei", m: "ì§€í‚¤ëŠ” ìë“¤", r: "Verb (Qal Participle)" },
                  { h: "×¢Öµ×“Ö¹×ªÖ¸×™×•", t: "edotav", m: "ê·¸ì˜ ì¦ê±°ë“¤", r: "Noun" },
                  { h: "×‘Ö¼Ö°×›Ö¸×œÖ¾×œÖµ×‘", t: "b'khol-lev", m: "ì˜¨ ë§ˆìŒìœ¼ë¡œ", r: "Prepositional Phrase" },
                  { h: "×™Ö´×“Ö°×¨Ö°×©××•Ö¼×”×•Ö¼", t: "yidr'shuhu", m: "ê·¸ë¥¼ êµ¬í•˜ëŠ”", r: "Verb (Qal Imperfect)" }
                ]
              },
              {
                verse: 3,
                hebrew: "×Ö·×£ ×œÖ¹×Ö¾×¤Ö¸×¢Ö²×œ×•Ö¼ ×¢Ö·×•Ö°×œÖ¸×” ×‘Ö¼Ö´×“Ö°×¨Ö¸×›Ö¸×™×• ×”Ö¸×œÖ¸×›×•Ö¼×ƒ",
                translation: "ë˜ ì €í¬ëŠ” ë¶ˆì˜ë¥¼ í–‰ì¹˜ ì•„ë‹ˆí•˜ê³  ê·¸ì˜ ë„ë¥¼ í–‰í•˜ëŠ”ë„ë‹¤.",
                words: [
                  { h: "×Ö·×£", t: "Af", m: "ë˜í•œ", r: "Adverb" },
                  { h: "×œÖ¹×Ö¾×¤Ö¸×¢Ö²×œ×•Ö¼", t: "lo-fa'alu", m: "í–‰í•˜ì§€ ì•Šì•˜ë‹¤", r: "Verb (Qal Perfect)" },
                  { h: "×¢Ö·×•Ö°×œÖ¸×”", t: "avlah", m: "ë¶ˆì˜", r: "Noun" },
                  { h: "×‘Ö¼Ö´×“Ö°×¨Ö¸×›Ö¸×™×•", t: "bidrakhav", m: "ê·¸ì˜ ê¸¸ì—ì„œ", r: "Prepositional Phrase" },
                  { h: "×”Ö¸×œÖ¸×›×•Ö¼", t: "halakhu", m: "ê·¸ë“¤ì´ ê±¸ì—ˆë‹¤", r: "Verb (Qal Perfect)" }
                ]
              },
              {
                verse: 4,
                hebrew: "×Ö·×ªÖ¼Ö¸×” ×¦Ö´×•Ö¼Ö´×™×ªÖ¸×” ×¤Ö´×§Ö¼Ö»×“Ö¶×™×šÖ¸ ×œÖ´×©×Ö°×Ö¹×¨ ×Ö°×Ö¹×“×ƒ",
                translation: "ì£¼ê»˜ì„œ ëª…ë ¹í•˜ì‚¬ ì£¼ì˜ ë²•ë„ë¥¼ ì—´ì‹¬íˆ ì§€í‚¤ê²Œ í•˜ì…¨ë‚˜ì´ë‹¤.",
                words: [
                  { h: "×Ö·×ªÖ¼Ö¸×”", t: "Atah", m: "ì£¼ê»˜ì„œ", r: "Pronoun" },
                  { h: "×¦Ö´×•Ö¼Ö´×™×ªÖ¸×”", t: "tzivvita", m: "ëª…ë ¹í•˜ì…¨ë‹¤", r: "Verb (Piel Perfect)" },
                  { h: "×¤Ö´×§Ö¼Ö»×“Ö¶×™×šÖ¸", t: "pikkudeikha", m: "ì£¼ì˜ ë²•ë„", r: "Noun" },
                  { h: "×œÖ´×©×Ö°×Ö¹×¨", t: "lishmor", m: "ì§€í‚¤ë„ë¡", r: "Verb (Qal Infinitive)" },
                  { h: "×Ö°×Ö¹×“", t: "me'od", m: "ì‹¬íˆ", r: "Adverb" }
                ]
              },
              {
                verse: 5,
                hebrew: "×Ö·×—Ö²×œÖ·×™ ×›Ö¼Ö´×™Ö¾×™Ö´×›Ö¼Ö¹× ×•Ö¼ ×“Ö°×¨Ö¸×›Ö¸×™ ×œÖ´×©×Ö°×Ö¹×¨ ×—Ö»×§Ö¼Ö¶×™×šÖ¸×ƒ",
                translation: "ë‚´ ê¸¸ì„ ì •ëˆí•˜ì‚¬ ì£¼ì˜ ìœ¨ë¡€ë¥¼ ì§€í‚¤ê²Œ í•˜ì†Œì„œ.",
                words: [
                  { h: "×Ö·×—Ö²×œÖ·×™", t: "Aá¸¥alai", m: "ì˜¤! ê·¸ë¬ìœ¼ë©´", r: "Interjection" },
                  { h: "×›Ö¼Ö´×™Ö¾×™Ö´×›Ö¼Ö¹× ×•Ö¼", t: "ki-yikonu", m: "ë‚´ ê¸¸ì´ êµ³ê²Œ ì„œì„œ", r: "Conjunction + Verb" },
                  { h: "×“Ö°×¨Ö¸×›Ö¸×™", t: "d'rakhai", m: "ë‚˜ì˜ ê¸¸ë“¤", r: "Noun" },
                  { h: "×œÖ´×©×Ö°×Ö¹×¨", t: "lishmor", m: "ì§€í‚¤ë„ë¡", r: "Verb (Qal Infinitive)" },
                  { h: "×—Ö»×§Ö¼Ö¶×™×šÖ¸", t: "á¸¥uqqeikha", m: "ì£¼ì˜ ìœ¨ë¡€", r: "Noun" }
                ]
              },
              {
                verse: 6,
                hebrew: "×Ö¸×– ×œÖ¹× ×Öµ×‘×•Ö¹×©× ×‘Ö¼Ö°×”Ö·×‘Ö¼Ö´×™×˜Ö´×™ ×Ö¶×œÖ¾×›Ö¼Ö¸×œÖ¾×Ö´×¦Ö°×•Ö¹×ªÖ¶×™×šÖ¸×ƒ",
                translation: "ë‚´ê°€ ì£¼ì˜ ëª¨ë“  ê³„ëª…ì— ì£¼ì˜í•  ë•Œì—ëŠ” ë¶€ë„ëŸ½ì§€ ì•„ë‹ˆí•˜ë¦¬ì´ë‹¤.",
                words: [
                  { h: "×Ö¸×–", t: "Az", m: "ê·¸ ë•Œì—", r: "Adverb" },
                  { h: "×œÖ¹×", t: "lo", m: "ì•„ë‹ˆë‹¤", r: "Negative Particle" },
                  { h: "×Öµ×‘×•Ö¹×©×", t: "evosh", m: "ë¶€ë„ëŸ½ì§€ ì•Šìœ¼ë¦¬", r: "Verb (Qal Imperfect)" },
                  { h: "×‘Ö¼Ö°×”Ö·×‘Ö¼Ö´×™×˜Ö´×™", t: "b'habbiti", m: "ë‚´ê°€ ë³¼ ë•Œ", r: "Preposition + Verb" },
                  { h: "×Ö¶×œÖ¾×›Ö¼Ö¸×œÖ¾×Ö´×¦Ö°×•Ö¹×ªÖ¶×™×šÖ¸", t: "el-kol-mitzvoteikha", m: "ì£¼ì˜ ëª¨ë“  ê³„ëª…", r: "Prepositional Phrase" }
                ]
              },
              {
                verse: 7,
                hebrew: "××•Ö¹×“Ö°×šÖ¸ ×‘Ö¼Ö°×™Ö¹×©×Ö¶×¨ ×œÖµ×‘Ö¸×‘ ×‘Ö¼Ö°×œÖ¸×Ö°×“Ö´×™ ×Ö´×©×Ö°×¤Ö¼Ö°×˜Öµ×™ ×¦Ö´×“Ö°×§Ö¶×šÖ¸×ƒ",
                translation: "ë‚´ê°€ ì£¼ì˜ ì˜ë¡œìš´ íŒë‹¨ì„ ë°°ìš¸ ë•Œì—ëŠ” ì •ì§í•œ ë§ˆìŒìœ¼ë¡œ ì£¼ê»˜ ê°ì‚¬í•˜ë¦¬ì´ë‹¤.",
                words: [
                  { h: "××•Ö¹×“Ö°×šÖ¸", t: "Od'kha", m: "ë‚´ê°€ ì£¼ê»˜ ê°ì‚¬í•˜ë¦¬", r: "Verb (Hiphil Imperfect)" },
                  { h: "×‘Ö¼Ö°×™Ö¹×©×Ö¶×¨", t: "b'yosher", m: "ì •ì§í•¨ìœ¼ë¡œ", r: "Preposition + Noun" },
                  { h: "×œÖµ×‘Ö¸×‘", t: "levav", m: "ë§ˆìŒ", r: "Noun" },
                  { h: "×‘Ö¼Ö°×œÖ¸×Ö°×“Ö´×™", t: "b'lomdi", m: "ë‚´ê°€ ë°°ìš¸ ë•Œ", r: "Preposition + Verb" },
                  { h: "×Ö´×©×Ö°×¤Ö¼Ö°×˜Öµ×™", t: "mishp'tei", m: "íŒë‹¨ë“¤", r: "Noun" },
                  { h: "×¦Ö´×“Ö°×§Ö¶×šÖ¸", t: "tzid'qekha", m: "ì£¼ì˜ ì˜", r: "Noun" }
                ]
              },
              {
                verse: 8,
                hebrew: "×Ö¶×ªÖ¾×—Ö»×§Ö¼Ö¶×™×šÖ¸ ×Ö¶×©×Ö°×Ö¹×¨ ×Ö·×œÖ¾×ªÖ¼Ö·×¢Ö·×–Ö°×‘Öµ× Ö´×™ ×¢Ö·×“Ö¾×Ö°×Ö¹×“×ƒ",
                translation: "ë‚´ê°€ ì£¼ì˜ ìœ¨ë¡€ë“¤ì„ ì§€í‚¤ì˜¤ë¦¬ë‹ˆ ë‚˜ë¥¼ ì•„ì£¼ ë²„ë¦¬ì§€ ë§ˆì˜µì†Œì„œ.",
                words: [
                  { h: "×Ö¶×ªÖ¾×—Ö»×§Ö¼Ö¶×™×šÖ¸", t: "et-á¸¥uqqeikha", m: "ì£¼ì˜ ìœ¨ë¡€ë¥¼", r: "Object Marker + Noun" },
                  { h: "×Ö¶×©×Ö°×Ö¹×¨", t: "esh'mor", m: "ë‚´ê°€ ì§€í‚¤ë¦¬", r: "Verb (Qal Imperfect)" },
                  { h: "×Ö·×œÖ¾×ªÖ¼Ö·×¢Ö·×–Ö°×‘Öµ× Ö´×™", t: "al-ta'azveni", m: "ë‚˜ë¥¼ ë²„ë¦¬ì§€ ë§ˆì†Œì„œ", r: "Negative Particle + Verb (Qal Imperfect)" },
                  { h: "×¢Ö·×“Ö¾×Ö°×Ö¹×“", t: "ad-m'od", m: "ì‹¬íˆ(ì™„ì „íˆ)", r: "Prepositional Phrase" }
                ]
              },
            ]
          },
          // Stanza 2: Bet (×‘) - Verses 9-16
          {
            hebrewLetter: "×‘ (Bet)",
            startVerse: 9,
            endVerse: 16,
            verses: [
              {
                verse: 9,
                hebrew: "×‘Ö¼Ö·×Ö¼Ö¶×” ×™Ö°×–Ö·×›Ö¼Ö¶×”Ö¾× Ö¼Ö·×¢Ö·×¨ ×Ö¶×ªÖ¾×Ö¹×¨Ö°×—×•Ö¹ ×œÖ´×©×Ö°×Ö¹×¨ ×›Ö¼Ö´×“Ö°×‘Ö¸×¨Ö¶×šÖ¸×ƒ",
                translation: "ì²­ë…„ì´ ë¬´ì—‡ìœ¼ë¡œ ê·¸ í–‰ì‹¤ì„ ê¹¨ë—ì¼€ í•˜ë¦¬ì´ê¹Œ ì£¼ì˜ ë§ì”€ì„ ë”°ë¼ ì‚¼ê°ˆ ê²ƒì´ë‹ˆì´ë‹¤.",
                words: [
                  { h: "×‘Ö¼Ö·×Ö¼Ö¶×”", t: "Bameh", m: "ë¬´ì—‡ìœ¼ë¡œ", r: "Interrogative" },
                  { h: "×™Ö°×–Ö·×›Ö¼Ö¶×”Ö¾× Ö¼Ö·×¢Ö·×¨", t: "yezakeh-na'ar", m: "ì²­ë…„ì´ ê¹¨ë—í•˜ê²Œ í• ê¹Œìš”", r: "Verb (Piel Imperfect) + Noun" },
                  { h: "×Ö¶×ªÖ¾×Ö¹×¨Ö°×—×•Ö¹", t: "et-orá¸¥o", m: "ê·¸ì˜ ê¸¸", r: "Object Marker + Noun" },
                  { h: "×œÖ´×©×Ö°×Ö¹×¨", t: "lishmor", m: "ì§€í‚¤ë„ë¡", r: "Verb (Qal Infinitive)" },
                  { h: "×›Ö¼Ö´×“Ö°×‘Ö¸×¨Ö¶×šÖ¸", t: "kidvarekha", m: "ì£¼ì˜ ë§ì”€ëŒ€ë¡œ", r: "Prepositional Phrase" }
                ]
              },
              {
                verse: 10,
                hebrew: "×‘Ö¼Ö°×›Ö¸×œÖ¾×œÖ´×‘Ö¼Ö´×™ ×“Ö°×¨Ö·×©×Ö°×ªÖ¼Ö´×™×šÖ¸ ×Ö·×œÖ¾×ªÖ¼Ö·×©×Ö°×’Ö¼Öµ× Ö´×™ ×Ö´×Ö¼Ö´×¦Ö°×•Ö¹×ªÖ¶×™×šÖ¸×ƒ",
                translation: "ë‚´ê°€ ì „ì‹¬ìœ¼ë¡œ ì£¼ë¥¼ ì°¾ì•˜ì‚¬ì˜¤ë‹ˆ ì£¼ì˜ ê³„ëª…ì—ì„œ ë– ë‚˜ì§€ ë§ê²Œ í•˜ì†Œì„œ.",
                words: [
                  { h: "×‘Ö¼Ö°×›Ö¸×œÖ¾×œÖ´×‘Ö¼Ö´×™", t: "B'khol-libi", m: "ë‚˜ì˜ ì˜¨ ë§ˆìŒìœ¼ë¡œ", r: "Prepositional Phrase" },
                  { h: "×“Ö°×¨Ö·×©×Ö°×ªÖ¼Ö´×™×šÖ¸", t: "d'rashtikha", m: "ë‚´ê°€ ì£¼ë¥¼ ì°¾ì•˜ë‹¤", r: "Verb (Qal Perfect)" },
                  { h: "×Ö·×œÖ¾×ªÖ¼Ö·×©×Ö°×’Ö¼Öµ× Ö´×™", t: "al-tash'geni", m: "ë‚´ê°€ ë– ë‚˜ê²Œ í•˜ì§€ ë§ˆì†Œì„œ", r: "Negative Particle + Verb (Hiphil Imperfect)" },
                  { h: "×Ö´×Ö¼Ö´×¦Ö°×•Ö¹×ªÖ¶×™×šÖ¸", t: "mimitÍ¡svoteikha", m: "ì£¼ì˜ ê³„ëª…ìœ¼ë¡œë¶€í„°", r: "Prepositional Phrase" }
                ]
              }
            ]
          },
        ];

        // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---
        const findVerseByNumber = (verseNum) => {
          for (const stanza of PSALM_119_DATA) {
            for (const verse of stanza.verses) {
              if (verse.verse === verseNum) {
                return verse;
              }
            }
          }
          return PSALM_119_DATA[0].verses[0];
        };

        // --- ì»´í¬ë„ŒíŠ¸: ë‹¨ì–´ ìƒì„¸ ëª¨ë‹¬ ---
        const WordDetailModal = ({ selectedWord, onClose }) => {
          if (!selectedWord) return null;

          return (
            <div 
              className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 transition-opacity duration-300"
              onClick={onClose}
            >
              <div 
                className="bg-white rounded-xl shadow-2xl w-full max-w-sm p-6 transform transition-all duration-300 scale-100"
                onClick={e => e.stopPropagation()}
              >
                <div className="flex justify-between items-start border-b pb-3 mb-4">
                  <h3 className="text-3xl font-bold text-gray-800 hebrew-text" dir="rtl">{selectedWord.h}</h3>
                  <button onClick={onClose} className="p-1 rounded-full text-gray-500 hover:bg-gray-100">
                    <X size={24} />
                  </button>
                </div>

                <div className="space-y-3">
                  <div className="p-3 bg-gray-50 rounded-lg">
                    <p className="text-xs font-semibold text-gray-600 mb-1">ìŒì—­ (Transliteration)</p>
                    <p className="text-lg font-mono text-indigo-700">{selectedWord.t}</p>
                  </div>
                  
                  <div className="p-3 bg-gray-50 rounded-lg">
                    <p className="text-xs font-semibold text-gray-600 mb-1">ì˜ë¯¸ (Meaning)</p>
                    <p className="text-lg text-gray-800">{selectedWord.m}</p>
                  </div>

                  <div className="p-3 bg-gray-50 rounded-lg">
                    <p className="text-xs font-semibold text-gray-600 mb-1">í’ˆì‚¬/êµ¬ì¡° (Part of Speech)</p>
                    <p className="text-base text-gray-700">{selectedWord.r}</p>
                  </div>
                </div>

                <button 
                  onClick={onClose} 
                  className="mt-6 w-full py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors active:bg-indigo-800"
                >
                  ë‹«ê¸°
                </button>
              </div>
            </div>
          );
        };


        // --- ì»´í¬ë„ŒíŠ¸: ë©”ì¸ ì•± ---
        const App = () => {
          const [currentVerseNum, setCurrentVerseNum] = useState(1);
          const [selectedWord, setSelectedWord] = useState(null);

          // í˜„ì¬ ì ˆ ì •ë³´ë¥¼ ë©”ëª¨ì´ì œì´ì…˜
          const currentVerse = useMemo(() => findVerseByNumber(currentVerseNum), [currentVerseNum]);
          
          // í˜„ì¬ Stanza ì •ë³´
          const currentStanza = useMemo(() => 
            PSALM_119_DATA.find(s => s.startVerse <= currentVerseNum && s.endVerse >= currentVerseNum) || PSALM_119_DATA[0]
          , [currentVerseNum]);

          // ë§ˆì§€ë§‰ ì ˆ ë²ˆí˜¸ (í˜„ì¬ ë°ì´í„° ë²”ìœ„)
          const lastAvailableVerse = 10;

          // ë‹¨ì–´ í´ë¦­ í•¸ë“¤ëŸ¬
          const handleWordClick = (word) => {
            setSelectedWord(word);
          };

          // ë‹¤ìŒ/ì´ì „ ì ˆ ì´ë™
          const navigateVerse = (direction) => {
            const nextVerseNum = currentVerseNum + direction;
            if (nextVerseNum >= 1 && nextVerseNum <= lastAvailableVerse) {
              setCurrentVerseNum(nextVerseNum);
            }
          };

          // ë Œë”ë§ì„ ìœ„í•´ íˆë¸Œë¦¬ì–´ í…ìŠ¤íŠ¸ë¥¼ ë‹¨ì–´ ë°°ì—´ë¡œ ë¶„ë¦¬ (ë‹¨ì–´ë³„ ë„ì–´ì“°ê¸° ê¸°ì¤€ìœ¼ë¡œë§Œ ë‹¨ìˆœ ë¶„ë¦¬)
          const hebrewWords = useMemo(() => {
              const text = currentVerse.hebrew;
              const dataWords = currentVerse.words;
              
              // ë„ì–´ì“°ê¸°, êµ¬ë‘ì ì„ í¬í•¨í•˜ì—¬ í…ìŠ¤íŠ¸ë¥¼ ë¶„ë¦¬ (Reactì˜ ì¸ë¼ì¸ ìš”ì†Œë¡œ ë§Œë“¦)
              const segments = text.split(/([ \u0590-\u05FF]+)/).filter(s => s.length > 0);
              
              let wordIndex = 0;
              return segments.map((segment, index) => {
                  // íˆë¸Œë¦¬ì–´ ë‹¨ì–´ì´ê±°ë‚˜ ë‹¨ì–´ + êµ¬ë‘ì ì¸ ê²½ìš° (ë‹¨ì–´ ê°ì²´ì™€ ë§¤í•‘)
                  if (segment.match(/[\u0590-\u05FF]/) && !segment.trim().match(/^[ \u0590-\u05FF]+$/)) { 
                      const wordData = dataWords[wordIndex];
                      wordIndex++;

                      if (wordData) {
                          return (
                              <span
                                  key={index}
                                  className="inline-block mx-1 py-1 px-2 rounded-lg cursor-pointer transition-all duration-200 hover:bg-yellow-100 hover:shadow-md active:scale-95 text-gray-900"
                                  onClick={() => handleWordClick(wordData)}
                              >
                                  {wordData.h}
                              </span>
                          );
                      }
                  }
                  // ê³µë°±, êµ¬ë‘ì , ê¸°íƒ€ ì„¸ê·¸ë¨¼íŠ¸ ì²˜ë¦¬
                  return <span key={index} className="inline-block mx-0.5">{segment}</span>;
              }).filter(Boolean);
          }, [currentVerse]);


          return (
            <div className="min-h-screen bg-gray-50 flex flex-col font-sans">
              
              {/* ìƒë‹¨ í—¤ë” */}
              <header className="bg-indigo-600 text-white shadow-lg p-4 sticky top-0 z-10">
                <div className="flex justify-between items-center max-w-2xl mx-auto">
                  <div className="flex items-center space-x-2">
                    <BookOpen size={24} />
                    <h1 className="text-xl font-bold">ì‹œí¸ 119í¸ íˆë¸Œë¦¬ì–´ í•™ìŠµ</h1>
                  </div>
                  <button 
                    className="p-2 rounded-full bg-indigo-700 hover:bg-indigo-800 transition-colors active:bg-indigo-900"
                    onClick={() => setCurrentVerseNum(1)}
                    title="ì²« ì ˆë¡œ ì´ë™"
                  >
                    <Home size={20} />
                  </button>
                </div>
              </header>

              {/* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */}
              <main className="flex-grow p-4 max-w-2xl mx-auto w-full pb-20">
                
                {/* ì ˆ ì •ë³´ ì¹´ë“œ */}
                <div className="bg-white rounded-xl shadow-xl p-5 mb-6 border-t-4 border-indigo-500">
                  
                  <p className="text-sm font-semibold text-indigo-500 mb-2">
                    ì—°(Stanza): {currentStanza.hebrewLetter} | í˜„ì¬ ì ˆ: <span className="text-2xl font-extrabold text-indigo-700">{currentVerseNum}</span>ì ˆ (ì´ 176ì ˆ ì¤‘)
                  </p>

                  <h2 
                    className="text-4xl sm:text-5xl text-right my-4 leading-relaxed font-serif text-gray-900 hebrew-text" 
                    dir="rtl"
                  >
                    {hebrewWords}
                  </h2>

                  <div className="mt-5 pt-4 border-t border-gray-100">
                    <p className="text-xs font-semibold text-gray-500">ê°œì—­ê°œì • ë²ˆì—­ (Korean Translation)</p>
                    <p className="text-base text-gray-700 leading-relaxed mt-1">
                      {currentVerse.translation}
                    </p>
                  </div>
                  
                </div>

                {/* ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ */}
                <div className="flex justify-between items-center space-x-4">
                  <button 
                    onClick={() => navigateVerse(-1)} 
                    disabled={currentVerseNum <= 1}
                    className="flex items-center justify-center w-full py-3 bg-gray-200 text-gray-700 font-bold rounded-lg shadow-md hover:bg-gray-300 disabled:opacity-50 transition-all active:bg-gray-400"
                    aria-label="ì´ì „ ì ˆ"
                  >
                    <ChevronLeft size={20} className="mr-1" /> ì´ì „ ì ˆ
                  </button>
                  
                  <button 
                    onClick={() => navigateVerse(1)} 
                    disabled={currentVerseNum >= lastAvailableVerse}
                    className="flex items-center justify-center w-full py-3 bg-indigo-500 text-white font-bold rounded-lg shadow-md hover:bg-indigo-600 disabled:opacity-50 transition-all active:bg-indigo-700"
                    aria-label="ë‹¤ìŒ ì ˆ"
                  >
                    ë‹¤ìŒ ì ˆ <ChevronRight size={20} className="ml-1" />
                  </button>
                </div>

                <p className="text-center text-xs text-gray-400 mt-4">
                    ë‹¨ì–´ë¥¼ íƒ­(í„°ì¹˜)í•˜ë©´ ìƒì„¸ ì •ë³´ê°€ íŒì—…ë©ë‹ˆë‹¤. (í˜„ì¬ 1~10ì ˆ ë°ì´í„°ë§Œ í¬í•¨ë¨)
                </p>
              </main>

              {/* ë‹¨ì–´ ìƒì„¸ ëª¨ë‹¬ */}
              <WordDetailModal 
                selectedWord={selectedWord} 
                onClose={() => setSelectedWord(null)} 
              />
            </div>
          );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>

    <script>
        // PWA Manifestì™€ Service Workerë¥¼ ì¸ë¼ì¸ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ë‹¨ì¼ íŒŒì¼ë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ì •

        // 1. Manifest íŒŒì¼ ì—­í• ì„ í•˜ëŠ” Blob ìƒì„± ë° URL ì„¤ì •
        const manifestData = {
          "name": "ì‹œí¸ 119í¸ íˆë¸Œë¦¬ì–´ í•™ìŠµ",
          "short_name": "ì‹œí¸119",
          "description": "ì‹œí¸ 119í¸ íˆë¸Œë¦¬ì–´ ë‹¨ì–´ë³„ í•™ìŠµ ì•±",
          "start_url": "./psalm119_pwa_single.html", // ì´ íŒŒì¼ì˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½
          "display": "standalone",
          "background_color": "#F9FAFB",
          "theme_color": "#4F46E5",
          "orientation": "portrait",
          "icons": [
            {
              "src": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' fill='%234F46E5'/%3E%3Ctext x='256' y='380' font-size='280' text-anchor='middle' fill='white'%3EğŸ“–%3C/text%3E%3C/svg%3E",
              "sizes": "512x512",
              "type": "image/svg+xml",
              "purpose": "any maskable"
            }
          ]
        };
        const manifestBlob = new Blob([JSON.stringify(manifestData)], {type: 'application/json'});
        const manifestUrl = URL.createObjectURL(manifestBlob);
        document.getElementById('manifest-pwa').setAttribute('href', manifestUrl);

        // 2. Service Worker ì¸ë¼ì¸ ì •ì˜ ë° ë“±ë¡
        const swCode = `
            const CACHE_NAME = 'psalm119-v2';
            const urlsToCache = [
                './psalm119_pwa_single.html', // ì´ íŒŒì¼ ìì²´ë¥¼ ìºì‹œ
                // ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ìºì‹œí•˜ë ¤ë©´ ì—¬ê¸°ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
            ];

            // ì„¤ì¹˜: ìºì‹œ íŒŒì¼ ëª©ë¡ì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì €ì¥
            self.addEventListener('install', event => {
              event.waitUntil(
                caches.open(CACHE_NAME)
                  .then(cache => cache.addAll(urlsToCache))
                  .catch(err => console.error('Service Worker Install Error:', err))
              );
            });

            // í™œì„±í™”: ì´ì „ ë²„ì „ ìºì‹œ ì •ë¦¬
            self.addEventListener('activate', event => {
              event.waitUntil(
                caches.keys().then(cacheNames => {
                  return Promise.all(
                    cacheNames.map(cacheName => {
                      if (cacheName !== CACHE_NAME) {
                        return caches.delete(cacheName);
                      }
                    })
                  );
                })
              );
            });

            // ìš”ì²­ ê°€ë¡œì±„ê¸°: ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ì—†ì„ ë•Œ ìºì‹œëœ ë¦¬ì†ŒìŠ¤ë¡œ ì‘ë‹µ
            self.addEventListener('fetch', event => {
              // PWA ì„¤ì¹˜ë¥¼ ìœ„í•´ ë©”ì¸ HTML íŒŒì¼ë§Œ ìºì‹œì—ì„œ ë¡œë“œí•˜ë„ë¡ ë‹¨ìˆœí™”
              if (event.request.url.includes('psalm119_pwa_single.html')) {
                event.respondWith(
                    caches.match(event.request)
                      .then(response => response || fetch(event.request))
                );
              }
            });
        `;

        const swBlob = new Blob([swCode], { type: 'application/javascript' });
        const swUrl = URL.createObjectURL(swBlob);

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register(swUrl)
                    .then(reg => {
                        console.log('Service Worker ë“±ë¡ ì„±ê³µ:', reg.scope);
                        // Service Workerê°€ ë“±ë¡ë˜ë©´ PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ê°€ ë” ì˜ ì‘ë™í•©ë‹ˆë‹¤.
                    })
                    .catch(err => console.log('Service Worker ë“±ë¡ ì‹¤íŒ¨:', err));
            });
        }
    </script>
</body>
</html>
